{"version":3,"sources":["webpack:///./src/components/wxLogin.vue?2389","webpack:///./src/components/wxLogin.vue?276d","webpack:///./src/components/wxLogin.vue?6d41","webpack:///./src/components/wxLogin.vue?b1a4","uni-app:///src/components/wxLogin.vue","webpack:///./src/components/wxLogin.vue?6783"],"names":["component","renderjs","options","__file","render","_h","this","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;2DAAA,2YASIA,EAAY,kBACd,UACA,SACA,mBACA,EACA,KACA,KACA,MACA,EACA,kBAjBEC,GAqBJD,EAAUE,QAAQC,OAAS,yBACZ,UAAAH,E;;;;2GCvBf,wzB;;;;2GCAA,0KACA,IAAII,EAAS,WACX,IACIC,EADMC,KACGC,eADHD,KAEGE,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBP,EAAOQ,eAAgB,G;;;;2DCRvB,siBAAwe,YAAG,G;;;;0ICiB3e,I,EAAA,G,EAAA,sC,qCACA,CACE,KADF,WAEI,MAAJ,CACM,SAAN,OAGE,KAAF,cACE,QAAF,CACI,eADJ,WAGM,IAAN,KACA,OACM,EAAN,gBACQ,KAAR,kBACQ,QAAR,YACU,QAAV,OACU,EAAV,qBAGQ,KAAR,YACU,EAAV,qBAII,YAjBJ,SAiBA,GAEM,IAAN,KACA,OACM,EAAN,gBACM,EAAN,OACQ,QAAR,YACA,SACY,QAAZ,YACY,EAAZ,iBAAc,KAAd,cACA,YACA,aACgB,EAAhB,sCACA,oCAcA,gBAOkB,EAAlB,iBACkB,EAAlB,4BACkB,EAAlB,mBACkB,EAAlB,iBATkB,EAAlB,iBACkB,QAAlB,SAEkB,EAAlB,eACkB,EAAlB,UAAoB,IAApB,8CAlBA,GACoB,QAApB,YACoB,SAApB,YAEkB,EAAlB,+BACA,YACoB,EAApB,4BACoB,EAApB,eACoB,EAApB,mBACoB,EAApB,iBACoB,QAApB,kBAsBI,eA/DJ,SA+DA,GACM,QAAN,OACA,GACQ,KAAR,+B;;;;2DC3FA,y3BAAo0B,YAAG,G","file":"components/wxLogin.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./wxLogin.vue?vue&type=template&id=5b30819d&\"\nvar renderjs\nimport script from \"./wxLogin.vue?vue&type=script&lang=js&\"\nexport * from \"./wxLogin.vue?vue&type=script&lang=js&\"\nimport style0 from \"./wxLogin.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/wxLogin.vue\"\nexport default component.exports","export * from \"-!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--15-0!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxLogin.vue?vue&type=template&id=5b30819d&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxLogin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxLogin.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"wx_login\">\n        <label for=\"btn\">\n            <!-- <div>立即登录</div> -->\n            <div>\n                <button id=\"btn\"\n                    @tap=\"getUserProfile\"\n                    @getphonenumber=\"getPhoneNumber\"\n                    v-show=\"true\"\n                    open-type=\"getPhoneNumber\">\n                    立即登录\n                </button>\n            </div>\n        </label>\n    </view>\n</template>\n<script>\nimport apiLogin from '@/services/api.login.js';\nexport default {\n    data() {\n        return {\n            userInfo: null\n        };\n    },\n    name: 'WeixinLogin',\n    methods: {\n        getUserProfile() {\n            // eslint-disable-next-line no-undef\n            let weixin = wx;\n            let that = this;\n            weixin.getUserProfile({\n                desc: '获取你的昵称、头像、地区及性别',\n                success: function(res) {\n                    console.log(res);\n                    that.userInfo = res.userInfo;\n                    // that.weChatLogin(res.userInfo);\n                },\n                fail: function(res) {\n                    that.$toast('微信授权失败');\n                }\n            });\n        },\n        weChatLogin(userInfo) {\n            // eslint-disable-next-line no-undef\n            let weixin = wx;\n            let that = this;\n            that.$loading.open();\n            weixin.login({\n                success: function(res) {\n                    if (res.code) {\n                        console.log(res.code);\n                        apiLogin.wxLogin({ code: res.code }).then(\n                            res => {\n                                if (res.code === 1) {\n                                    that.$store.commit('updateToken', res.retObj);\n                                    if (!res.retObj.userNick && !res.retObj.headImg) {\n                                        let data = {\n                                            headImg: userInfo.avatarUrl,\n                                            userNick: userInfo.nickName\n                                        };\n                                        apiLogin.updateUserInfo(data).then(\n                                            res => {\n                                                that.$store.dispatch('loadUser');\n                                                that.$forceUpdate();\n                                                that.$emit('upDate', true);\n                                                that.$loading.close();\n                                                console.log(res);\n                                            }\n                                        );\n                                    } else if (!res.retObj.phone) {\n                                        that.$loading.close();\n                                        console.log(111);\n                                        // that.$store.dispatch('loadUser');\n                                        that.$forceUpdate();\n                                        uni.reLaunch({ url: '/pages/mine/views/update-phone?isBind=1' });\n                                    } else {\n                                        that.$loading.close();\n                                        that.$store.dispatch('loadUser');\n                                        that.$emit('upDate', true);\n                                        that.$forceUpdate();\n                                    }\n                                }\n                            }\n                        );\n                    }\n                }\n            });\n        },\n        getPhoneNumber(e) {\n            console.log(e);\n            if (e) {\n                this.weChatLogin(this.userInfo);\n            }\n        }\n    }\n};\n</script>\n<style lang=\"less\">\n.wx_login{\n    div{\n        font-size: 28rpx;\n        button::after {\n            border: none;\n            border-radius:0!important;\n            background-color: none!important;\n            position:relative;\n            display:unset!important;\n            margin-left:0!important;\n            margin-right:0!important;\n            padding-left:0!important;\n            padding-right:0!important;\n            box-sizing:border-box;\n            font-size:28rpx!important;\n            text-align:center;\n            text-decoration:none;\n            line-height:unset!important;\n            border-radius:0!important;\n            -webkit-tap-highlight-color:transparent;\n            overflow:hidden;\n            color:unset!important;\n            background-color:unset!important;\n        }\n        button{\n            font-size: 28rpx!important;\n            border-radius:0!important;\n            background-color: none!important;\n            position:relative;\n            display:unset!important;\n            margin-left:0!important;\n            margin-right:0!important;\n            padding-left:0!important;\n            padding-right:0!important;\n            box-sizing:border-box;\n            font-size:28rpx!important;\n            text-align:center;\n            text-decoration:none;\n            line-height:unset!important;\n            border-radius:0!important;\n            -webkit-tap-highlight-color:transparent;\n            overflow:hidden;\n            color:unset!important;\n            background-color:unset!important;\n        }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxLogin.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./wxLogin.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}