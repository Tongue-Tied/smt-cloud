{"version":3,"sources":["uni-app:///src/main.js","webpack:///./src/pages/index/shopping-car/shopping-car.vue?082d","webpack:///./src/pages/index/shopping-car/shopping-car.vue?0c11","webpack:///./src/pages/index/shopping-car/shopping-car.vue?3741","webpack:///./src/pages/index/shopping-car/shopping-car.vue?adef","uni-app:///src/pages/index/shopping-car/shopping-car.vue","webpack:///./src/pages/index/shopping-car/shopping-car.vue?a01b","webpack:///./src/pages/index/shopping-car/shopping-car.vue?2f5d"],"names":["createPage","Page"],"mappings":";;;;;;;;;;;;AAAA;;AAAmB;;AACnB;;AACA;;;;AACAA,UAAU,CAACC,oBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyH;AACzH;AACgE;AACL;AACc;;;AAGzE;AACsI;AACtI,gBAAgB,gJAAU;AAC1B,EAAE,kFAAM;AACR,EAAE,uFAAM;AACR,EAAE,gGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,2FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,aAAa,mQAEN;AACP,KAAK;AACL;AACA,aAAa,qOAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC3CA;AAAA;AAAA;AAAA;AAA2f,CAAgB,ugBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;ACkD/gB;;;;;;;;eACA;AACA,MADA,kBACA;AACA;AACA,iBADA;AAEA,oBAFA;AAGA,mBAHA;AAIA,yBAJA;AAKA;AALA;AAOA,GATA;AAUA,SAVA,qBAUA;AACA;AACA,GAZA;AAaA;AACA,WADA,qBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAGA,0BAHA;;AAAA;AAGA,mBAHA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAOA;AACA;AACA;AACA;;AACA;;AACA;AACA;AACA,mBAFA,MAEA;AACA;AACA;;AACA;AACA;AACA;AAAA;AAAA;AACA;;AApBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAqBA,KAtBA;AAuBA,YAvBA,sBAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OANA,MAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KArCA;AAsCA,cAtCA,sBAsCA,IAtCA,EAsCA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA,KA9CA;AA+CA,SA/CA,mBA+CA;AACA;AACA;AACA;;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AADA,aADA;AAIA;AAJA;AAMA;AACA;;AACA,uCAhBA,CAiBA;AACA;AACA;AACA;AACA;AACA;;AACA;AAAA;AAAA;AACA,KAvEA;AAwEA,aAxEA,qBAwEA,KAxEA,EAwEA,CAxEA,EAwEA;AACA;AACA,KA1EA;AA2EA,cA3EA,wBA2EA;AAAA;;AACA;AACA;AACA;;AACA;;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AADA;;AAGA,yCACA;AACA;AACA;AACA;AACA,OALA;AAOA;AA/FA,GAbA;AA8GA,mBA9GA,+BA8GA;AACA;AACA;AAhHA,C;;;;;;;;;;;;;;ACnDA;AAAA;AAAA;AAAA;AAA+2B,CAAgB,i0BAAG,EAAC,C;;;;;;;;;;;ACAn4B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/shopping-car/shopping-car.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/index/shopping-car/shopping-car.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./shopping-car.vue?vue&type=template&id=42a5a8a9&\"\nvar renderjs\nimport script from \"./shopping-car.vue?vue&type=script&lang=js&\"\nexport * from \"./shopping-car.vue?vue&type=script&lang=js&\"\nimport style0 from \"./shopping-car.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/shopping-car/shopping-car.vue\"\nexport default component.exports","export * from \"-!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--15-0!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shopping-car.vue?vue&type=template&id=42a5a8a9&\"","var components\ntry {\n  components = {\n    uCheckbox: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-checkbox/u-checkbox\" */ \"uview-ui/components/u-checkbox/u-checkbox.vue\"\n      )\n    },\n    uNumberBox: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-number-box/u-number-box\" */ \"uview-ui/components/u-number-box/u-number-box.vue\"\n      )\n    },\n    uEmpty: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-empty/u-empty\" */ \"uview-ui/components/u-empty/u-empty.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shopping-car.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shopping-car.vue?vue&type=script&lang=js&\"","<template>\n    <div class=\"shopping_car\">\n        <div class=\"all_chose\" v-if=\"noGoods\">\n            <u-checkbox\n                v-model=\"checked\"\n                shape=\"circle\"\n                @change=\"allChose\"\n            >全选</u-checkbox>\n            <div @click=\"deleteItem\" class=\"delete\">删除</div>\n        </div>\n        <div v-for=\"(item, index) in carList\" :key=\"index\" class=\"car_item\">\n            <div class=\"car_item_checkbox\">\n                <u-checkbox\n                    v-model=\"item.isChose\"\n                    shape=\"circle\"\n                    @change=\"itemChange(item)\"\n                ></u-checkbox>\n            </div>\n            <div class=\"car_item_img\">\n                <image :src=\"item.goodsImg\"></image>\n            </div>\n            <div class=\"car_item_info\">\n                <div class=\"cii_top\">\n                    <div>{{item.goodsName}}</div>\n                    <div>颜色分类: &nbsp;{{item.goodsColor}}</div>\n                    <div>尺码: &nbsp;{{item.goodsSize}}</div>\n                </div>\n                <div class=\"cii_bottom\">\n                    <div class=\"cb_price\">\n                        <span>¥{{item.price}}</span>\n                        <span>¥{{item.origPrice}}</span>\n                    </div>\n                    <div class=\"cb_num\">\n                        <u-number-box :min=\"1\" v-model=\"item.carNumber\" @change=\"valChange(index, $event)\"></u-number-box>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"foot_bar\">\n            <div class=\"fb_price\">\n                <div>合计</div>\n                <div class=\"my_price\"><span>¥{{totalPrice}}</span><span>¥{{totalOriginPrice}}</span></div>\n            </div>\n            <div class=\"fb_btn\" @click=\"toPay\">去支付</div>\n        </div>\n        <u-empty mode=\"car\" margin-top=\"40\" v-if=\"!noGoods\"></u-empty>\n    </div>\n</template>\n\n<script>\nimport apiCar from '@/services/api.shop.js';\nexport default {\n    data() {\n        return {\n            carList: [],\n            checked: false,\n            totalPrice: 0,\n            totalOriginPrice: 0,\n            noGoods: false\n        };\n    },\n    created() {\n        this.getList();\n    },\n    methods: {\n        async getList() {\n            let res;\n            try {\n                res = await apiCar.carList();\n            } catch (e) {\n            // TODO handle the exception\n            }\n            if (res) {\n                for (let i = 0; i < res.retArr.length; i++) {\n                    res.retArr[i].isChose = false;\n                }\n                this.carList = res.retArr;\n                if (this.carList.length === 0) {\n                    this.noGoods = false;\n                } else {\n                    this.noGoods = true;\n                }\n                this.totalPrice = 0;\n                this.totalOriginPrice = 0;\n                setTimeout(function() { uni.stopPullDownRefresh(); }, 100);\n            }\n        },\n        allChose() {\n            if (this.checked) {\n                for (let i = 0; i < this.carList.length; i++) {\n                    this.carList[i].isChose = false;\n                    this.totalPrice = 0;\n                    this.totalOriginPrice = 0;\n                }\n            } else {\n                for (let i = 0; i < this.carList.length; i++) {\n                    this.carList[i].isChose = true;\n                    this.totalPrice = this.$big(this.totalPrice).add(this.carList[i].price * (this.carList[i].count || 1)).toNumber();\n                    this.totalOriginPrice = this.$big(this.totalOriginPrice).add(this.carList[i].origPrice * (this.carList[i].count || 1)).toNumber();\n                }\n            }\n        },\n        itemChange(item) {\n            if (!item.isChose) {\n                this.totalPrice = this.$big(this.totalPrice).add(item.price).toNumber();\n                this.totalOriginPrice = this.$big(this.totalOriginPrice).add(item.origPrice).toNumber();\n            } else {\n                this.totalPrice = this.$big(this.totalPrice).minus(item.price).toNumber();\n                this.totalOriginPrice = this.$big(this.totalOriginPrice).minus(item.origPrice).toNumber();\n            }\n        },\n        toPay() {\n            if (this.totalPrice === 0) {\n                return this.$toast('还没有选择商品哟');\n            }\n            let arr = [];\n            for (let i = 0; i < this.carList.length; i++) {\n                if (this.carList[i].isChose) {\n                    console.log(this.carList[i]);\n                    arr.push({\n                        goodsInfo: {\n                            title: this.carList[i].goodsName\n                        },\n                        classify: this.carList[i]\n                    });\n                }\n            }\n            uni.setStorageSync('order', arr);\n            // {\n            //             goodsInfo: {\n            //                 title: this.info.title\n            //             },\n            //             classifyList: [this.info.goodsClassifyList[this.classifyActive]]\n            //         }\n            uni.navigateTo({ url: '/pages/index/shop/shop-pay' });\n        },\n        valChange(index, e) {\n            this.carList[index].count = e.value;\n        },\n        deleteItem() {\n            if (this.totalPrice === 0) {\n                return this.$toast('请选择要删除的商品');\n            }\n            let arr = [];\n            for (let i = 0; i < this.carList.length; i++) {\n                if (this.carList[i].isChose) {\n                    arr.push(this.carList[i].carId);\n                }\n            }\n            let data = {\n                carIds: arr.join(',')\n            };\n            apiCar.delCar(data).then(\n                res => {\n                    if (res.code === 1) {\n                        this.getList();\n                    }\n                }\n            );\n        }\n    },\n    onPullDownRefresh() {\n        this.getList();\n    }\n};\n</script>\n\n<style lang=\"less\">\n.shopping_car{\n    padding-bottom: 160rpx;\n    .all_chose{\n        width: 92%;\n        margin: 0 auto;\n        padding: 20rpx 0 0 30rpx;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        .delete{\n            padding-right: 20rpx;\n        }\n    }\n    .car_item{\n        display: flex;\n        align-items: center;\n        height: 320rpx;\n        width: 92%;\n        margin: 0 auto;\n        border-radius: 40rpx;\n        background: #ffffff;\n        margin-top: 40rpx;\n        .car_item_checkbox{\n            padding-left: 15rpx;\n        }\n        .car_item_img{\n            width: 160rpx;\n            height: 80%;\n            image{\n                width: 100%;\n                height: 160rpx;\n                border-radius: 20rpx;\n            }\n        }\n        .car_item_info{\n            flex: 1;\n            padding: 0 15rpx 0 30rpx;\n            display: flex;\n            height: 80%;\n            flex-direction: column;\n            justify-content: space-between;\n            .cii_top{\n                display: flex;\n                flex-direction: column;\n                justify-content: flex-start;\n                align-items: flex-start;\n                font-size: 24rpx;\n                color: #999999;\n                :nth-child(1){\n                    font-size: 26rpx;\n                    color: #333333;\n                    padding-bottom: 30rpx;\n                }:nth-child(2){\n                    margin-bottom: 30rpx;\n                }\n            }\n            .cii_bottom{\n                display: flex;\n                justify-content: space-between;\n                .cb_price{\n                    :nth-child(1){\n                        color: #ff2742;\n                        font-size: 30rpx;\n                    }\n                    :nth-child(2){\n                        color: #999999;\n                        font-size: 24rpx;\n                        text-decoration: line-through;\n                        padding-left: 10rpx;\n                    }\n                }\n            }\n        }\n    }\n    .foot_bar{\n        position: fixed;\n        width: 100%;\n        height: 110rpx;\n        bottom: 0;\n        background: #ffffff;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        .fb_price{\n            display: flex;\n            align-items: center;\n            :nth-child(1){\n                font-size: 26rpx;\n                color: #333333;\n                padding-left: 40rpx;\n            }\n            .my_price{\n                :nth-child(1){\n                    color: #ff2742;\n                    font-size: 26rpx;\n                    padding-left: 20rpx;\n                }\n                :nth-child(2){\n                    color: #999999;\n                    font-size: 26rpx;\n                    text-decoration: line-through;\n                    padding-left: 20rpx;\n                }\n            }\n        }\n        .fb_btn{\n            width: 200rpx;\n            height: 60%;\n            background: #ff2742;\n            border-radius: 40rpx;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            color: #ffffff;\n            margin-right: 40rpx;\n        }\n    }\n}\n</style>\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shopping-car.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./shopping-car.vue?vue&type=style&index=0&lang=less&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1627626735444\n      var cssReload = require(\"/Users/wangsen/Desktop/smt-cloud/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}