{"version":3,"sources":["uni-app:///src/main.js","webpack:///./src/pages/mine/views/account.vue?9f33","webpack:///./src/pages/mine/views/account.vue?6c11","webpack:///./src/pages/mine/views/account.vue?4b7e","webpack:///./src/pages/mine/views/account.vue?c22b","uni-app:///src/pages/mine/views/account.vue","webpack:///./src/pages/mine/views/account.vue?c0b9"],"names":["createPage","Page","component","renderjs","options","__file","components","uCellItem","uLine","uPopup","uIcon","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","f0","_self","_c","userInfo","phone","_f","_isMounted","e0","$event","show","e1","cancellation","e2","e3","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBAAmB,8BACnB,kB,mDAEAA,EADA,+CACWC,U;;;;2DCHX,iZASIC,EAAY,kBACd,UACA,SACA,mBACA,EACA,KACA,KACA,MACA,EACA,kBAjBEC,GAqBJD,EAAUE,QAAQC,OAAS,+BACZ,UAAAH,E;;;;2GCvBf,41B;;;;2GCAA,IAAII,EAAJ,kLACA,IACEA,EAAa,CACXC,UAAW,WACT,OAAO,wNAITC,MAAO,WACL,OAAO,0LAITC,OAAQ,WACN,OAAO,gMAITC,MAAO,WACL,OAAO,2LAKX,MAAOC,GACP,IAC+C,IAA7CA,EAAEC,QAAQC,QAAQ,wBACa,IAA/BF,EAAEC,QAAQC,QAAQ,QAWlB,MAAMF,EATNG,QAAQC,MAAMJ,EAAEC,SAChBE,QAAQC,MAAM,mBACdD,QAAQC,MACN,uFAEFD,QAAQC,MACN,mDAMN,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,SAASC,MAAQR,EAAIS,GAAG,QAAPT,CAAgBA,EAAIO,SAASC,OAAS,MAE/DR,EAAIU,aACPV,EAAIW,GAAK,SAASC,GAChBZ,EAAIa,MAAO,GAGbb,EAAIc,GAAK,SAASF,GAChBZ,EAAIe,cAAe,GAGrBf,EAAIgB,GAAK,SAASJ,GAChBZ,EAAIe,cAAe,GAGrBf,EAAIiB,GAAK,SAASL,GAChBZ,EAAIa,MAAO,IAIfb,EAAIkB,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLlB,GAAIA,MAKRmB,GAAmB,EACnBC,EAAkB,GACtBzB,EAAO0B,eAAgB,G;;;;2DC5EvB,okBAAsgB,YAAG,G;;;;0ICmDzgB,I,EAAA,G,EAAA,uC,qCACA,CACE,WAAF,CACI,O,kNAEF,KAJF,WAKI,MAAJ,CACM,SAAN,KACM,MAAN,EACM,QAAN,2CACM,SAAN,GACM,cAAN,EACM,WAAN,4CAGE,OAdF,WAeI,KAAJ,4BACI,KAAJ,gCACI,KAAJ,gBAEE,QAAF,CACI,eADJ,WACM,IAMN,EANA,OACA,wCAIM,KAAN,gBACA,GACQ,SAAR,eAEM,EAAN,+BACA,YACA,aACU,EAAV,iBACU,EAAV,6BACU,EAAV,UAGA,YACQ,EAAR,cACQ,EAAR,iBACQ,EAAR,WAlBQ,KAAR,SAsBI,UAzBJ,WA0BM,EAAN,YAAQ,IAAR,oCAEI,SA5BJ,WA6BM,IAAN,yBAGQ,OAAR,yBAFQ,EAAR,YAAU,IAAV,sCAKI,OAnCJ,WAmCM,IAAN,OACM,EAAN,gCACA,YACA,YACU,EAAV,eACU,EAAV,mBACU,EAAV,iCACU,WAAV,WACY,EAAZ,UAAc,IAAd,wBACA,MAEU,EAAV,gBAGA,YACQ,EAAR,uB;;;;2DCzHA,+6BAA03B,YAAG,G","file":"pages/mine/views/account.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\nimport Vue from 'vue'\nimport Page from './pages/mine/views/account.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./account.vue?vue&type=template&id=62004f09&\"\nvar renderjs\nimport script from \"./account.vue?vue&type=script&lang=js&\"\nexport * from \"./account.vue?vue&type=script&lang=js&\"\nimport style0 from \"./account.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/mine/views/account.vue\"\nexport default component.exports","export * from \"-!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--15-0!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./account.vue?vue&type=template&id=62004f09&\"","var components\ntry {\n  components = {\n    uCellItem: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-cell-item/u-cell-item\" */ \"uview-ui/components/u-cell-item/u-cell-item.vue\"\n      )\n    },\n    uLine: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-line/u-line\" */ \"uview-ui/components/u-line/u-line.vue\"\n      )\n    },\n    uPopup: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-popup/u-popup\" */ \"uview-ui/components/u-popup/u-popup.vue\"\n      )\n    },\n    uIcon: function() {\n      return import(\n        /* webpackChunkName: \"node-modules/uview-ui/components/u-icon/u-icon\" */ \"uview-ui/components/u-icon/u-icon.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var f0 = _vm.userInfo.phone ? _vm._f(\"phone\")(_vm.userInfo.phone) : null\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.show = true\n    }\n\n    _vm.e1 = function($event) {\n      _vm.cancellation = true\n    }\n\n    _vm.e2 = function($event) {\n      _vm.cancellation = false\n    }\n\n    _vm.e3 = function($event) {\n      _vm.show = false\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        f0: f0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./account.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./account.vue?vue&type=script&lang=js&\"","<template>\n    <div class=\"account_box\">\n        <div class=\"account_container\">\n            <u-cell-item title=\"用户名\" @click=\"show = true\" :title-style=\"{color:'#333333',fontSize:'28rpx'}\" :border-bottom=\"true\">\n                <div style=\"color:#333333\">{{userInfo.userNick}}</div>\n            </u-cell-item>\n            <u-line color=\"#dfdfdf\" />\n            <u-cell-item :title-style=\"{color:'#333333',fontSize:'28rpx'}\" title=\"重置密码\" @click=\"resetPwd\">\n            </u-cell-item>\n            <u-line color=\"#dfdfdf\" />\n            <u-cell-item :title-style=\"{color:'#333333',fontSize:'28rpx'}\" title=\"绑定/更改手机号\" @click=\"bindPhone\">\n                <div v-if=\"userInfo.phone\" style=\"color:#333333\">{{userInfo.phone | phone}}</div>\n            </u-cell-item>\n            <!-- <u-cell-item title=\"绑定微信\" :border-bottom=\"false\" :arrow=\"!userInfo.wxName\">\n                <div style=\"color:#ff2724\">{{userInfo.wxName || \"还未绑定\"}}</div>\n            </u-cell-item> -->\n        </div>\n        <div class=\"btn_cancel\" @click=\"cancellation = true\">注销账户</div>\n        <mPopup :show=\"cancellation\" @updateUser=\"logOut\" @closePopup=\"cancellation = false\" :title=\"'注销账号'\" :btnText=\"'知道了,我要注销'\">\n            <div class=\"cancel_box\">\n                <div class=\"left\">\n                    <image mode=\"widthFix\" :src=\"zhuxiaoImg\"></image>\n                </div>\n                <div class=\"right\">确定要注销账号吗？账号注销后，将无法还原</div>\n            </div>\n        </mPopup>\n        <u-popup v-model=\"show\" mode=\"center\" class=\"my_popup\" border-radius=\"50\">\n            <div class=\"popup_container\">\n                <div class=\"header\" :style=\"'background-image:url('+ backImg + ')'\">\n                        修改用户名\n                </div>\n                <div class=\"middle\">\n                    <div class=\"input_box\">\n                        <input v-model=\"userName\" type=\"text\">\n                    </div>\n                    <div class=\"tips\">\n                        仅限字母、数字、下划线\n                    </div>\n                </div>\n                <div class=\"footer\">\n                    <div @click=\"updateUserName\">确定</div>\n                </div>\n            </div>\n            <div class=\"icon_box\" @click=\"show=false\">\n                <u-icon size=\"60\" color=\"#ffffff\" name=\"close-circle\"></u-icon>\n            </div>\n        </u-popup>\n    </div>\n</template>\n<script>\nimport mPopup from '@/components/m-popup';\nimport api from '@/services/api.public.js';\nexport default {\n    components: {\n        mPopup\n    },\n    data() {\n        return {\n            userInfo: null,\n            show: false,\n            backImg: require('@/static/imgs/score/cloud.png'),\n            userName: '',\n            cancellation: false,\n            zhuxiaoImg: require('@/static/imgs/my/zhuxiao.png')\n        };\n    },\n    onShow() {\n        this.userInfo = this.$state().user;\n        this.userName = this.userInfo.userNick;\n        this.$forceUpdate();\n    },\n    methods: {\n        updateUserName() {\n            if (this.userName === this.userInfo.userNick) {\n                this.show = false;\n                return;\n            }\n            this.$loading.open();\n            let data = {\n                userNick: this.userName\n            };\n            api.updateUserInfo(data).then(\n                res => {\n                    if (res.code === 1) {\n                        this.$loading.close();\n                        this.userInfo.userNick = this.userName;\n                        this.show = false;\n                    }\n                },\n                err => {\n                    this.$toast(err.msg);\n                    this.$loading.close();\n                    this.show = false;\n                }\n            );\n        },\n        bindPhone() {\n            uni.navigateTo({ url: '/pages/mine/views/update-phone' });\n        },\n        resetPwd() {\n            if (this.$state().user.phone) {\n                uni.navigateTo({ url: '/pages/mine/views/reset-password' });\n            } else {\n                return this.$toast('请先去绑定手机号哟');\n            }\n        },\n        logOut() {\n            api.cancellationUser().then(\n                res => {\n                    if (res.code === 1) {\n                        this.$toast('注销成功');\n                        uni.clearStorageSync();\n                        this.$store.commit('updateUser', null);\n                        setTimeout(() => {\n                            uni.reLaunch({ url: '/pages/index/index' });\n                        }, 3000);\n                    } else {\n                        this.$toast('注销失败');\n                    }\n                },\n                err => {\n                    this.$toast('网络连接失败');\n                }\n            );\n        }\n    }\n};\n</script>\n<style lang=\"less\">\npage{\n    background: #f5f5f5;\n}\n.account_box{\n    .my_popup{\n        /deep/ .u-drawer-content {\n            overflow: visible !important;\n            display: flex;\n            .u-mode-center-box{\n                background-color: #99999900 !important;\n                overflow: visible !important;\n            }\n            .uni-scroll-view{\n                overflow: visible !important;\n            }\n        }\n        /deep/ .icon_box{\n            position: fixed;\n            right: 100rpx;\n            top: 25%;\n            transform: translate(0%,0);\n            z-index: 1000000;\n        }\n    }\n    .account_container{\n        width: 90%;\n        background: #ffffff;\n        margin: 60rpx auto;\n        border-radius: 50rpx;\n    }\n    .popup_container{\n        position: relative;\n        overflow: unset !important;\n        .header{\n            height: 200rpx;\n            width: 600rpx;\n            background-position: top;\n            background-size: 100%,50%;\n            background-repeat: no-repeat;\n            background-color: #ffffff;\n            display: flex;\n            border-top-left-radius: 70rpx;\n            border-top-right-radius: 70rpx;\n            justify-content: center;\n            align-items: center;\n            font-size: 40rpx;\n            color: #ffffff;\n            font-weight: 500;\n            position: relative;\n            overflow: visible;\n        }\n        .middle{\n            width: 600rpx;\n            background: #ffffff;\n            .input_box{\n                width: 80%;\n                height: 90rpx;\n                background: #f5f5f5;\n                margin: 0 auto;\n                display: flex;\n                align-items: center;\n                border-radius: 50rpx;\n                input{\n                    height: 100%;\n                    width: 100%;\n                    padding-left: 20rpx;\n                }\n            }\n            .tips{\n                width: 100%;\n                padding-top: 40rpx;\n                text-align: center;\n            }\n        }\n        .footer{\n            width: 600rpx;\n            height: 200rpx;\n            background: #ffffff;\n            margin: 0 auto;\n            border-bottom-left-radius: 70rpx;\n            border-bottom-right-radius: 70rpx;\n            color: #ffffff;\n            font-size: 32rpx;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            div{\n                width: 80%;\n                height: 100rpx;\n                margin: 0 auto;\n                background: #ff2724;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                border-radius: 50rpx;\n            }\n        }\n    }\n    .btn_cancel{\n        width: 90%;\n        height: 80rpx;\n        margin: 0 auto;\n        border-radius: 40rpx;\n        border: 2rpx solid #ff2724;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 28rpx;\n        color: #ff2724;\n    }\n    .cancel_box{\n        display: flex;\n        align-items: center;\n        width: 85%;\n        margin: 0 auto;\n        .left{\n            padding-right: 20rpx;\n            image{\n                width: 140rpx;\n            }\n        }\n        .right{\n            font-size: 28rpx;\n            color: #333333;\n        }\n    }\n}\n</style>\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./account.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./account.vue?vue&type=style&index=0&lang=less&\""],"sourceRoot":""}