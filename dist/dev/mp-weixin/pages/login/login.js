(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/login/login"],{74:
/*!******************************************************!*\
  !*** ./src/main.js?{"page":"pages%2Flogin%2Flogin"} ***!
  \******************************************************/
/*! no static exports found */function(e,n,t){"use strict";!function(e){t(/*! uni-pages */4),t(/*! @dcloudio/uni-stat */5);n(t(/*! vue */2));function n(e){return e&&e.__esModule?e:{default:e}}e(n(t(/*! ./pages/login/login.vue */75)).default)}.call(this,t(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).createPage)},75:
/*!***********************************!*\
  !*** ./src/pages/login/login.vue ***!
  \***********************************/
/*! no static exports found */function(e,n,t){"use strict";t.r(n);var o,r=t(/*! ./login.vue?vue&type=template&id=b237504c& */76),i=t(/*! ./login.vue?vue&type=script&lang=js& */78);for(o in i)["default"].indexOf(o)<0&&function(e){t.d(n,e,function(){return i[e]})}(o);t(/*! ./login.vue?vue&type=style&index=0&lang=less& */81);var s=t(/*! ../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */16),r=Object(s.default)(i.default,r.render,r.staticRenderFns,!1,null,null,null,!1,r.components,void 0);r.options.__file="pages/login/login.vue",n.default=r.exports},76:
/*!******************************************************************!*\
  !*** ./src/pages/login/login.vue?vue&type=template&id=b237504c& ***!
  \******************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,n,t){"use strict";t.r(n);var o=t(/*! -!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--15-0!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=b237504c& */77);t.d(n,"render",function(){return o.render}),t.d(n,"staticRenderFns",function(){return o.staticRenderFns}),t.d(n,"recyclableRender",function(){return o.recyclableRender}),t.d(n,"components",function(){return o.components})},77:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--15-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pages/login/login.vue?vue&type=template&id=b237504c& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,n,t){"use strict";var o;t.r(n),t.d(n,"render",function(){return r}),t.d(n,"staticRenderFns",function(){return s}),t.d(n,"recyclableRender",function(){return i}),t.d(n,"components",function(){return o});try{o={uTabs:function(){return Promise.all(/*! import() | node-modules/uview-ui/components/u-tabs/u-tabs */[t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-tabs/u-tabs")]).then(t.bind(null,/*! uview-ui/components/u-tabs/u-tabs.vue */513))},uField:function(){return t.e(/*! import() | node-modules/uview-ui/components/u-field/u-field */"node-modules/uview-ui/components/u-field/u-field").then(t.bind(null,/*! uview-ui/components/u-field/u-field.vue */520))},uIcon:function(){return t.e(/*! import() | node-modules/uview-ui/components/u-icon/u-icon */"node-modules/uview-ui/components/u-icon/u-icon").then(t.bind(null,/*! uview-ui/components/u-icon/u-icon.vue */527))},uInput:function(){return Promise.all(/*! import() | node-modules/uview-ui/components/u-input/u-input */[t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-input/u-input")]).then(t.bind(null,/*! uview-ui/components/u-input/u-input.vue */534))},uButton:function(){return t.e(/*! import() | node-modules/uview-ui/components/u-button/u-button */"node-modules/uview-ui/components/u-button/u-button").then(t.bind(null,/*! uview-ui/components/u-button/u-button.vue */541))},uVerificationCode:function(){return t.e(/*! import() | node-modules/uview-ui/components/u-verification-code/u-verification-code */"node-modules/uview-ui/components/u-verification-code/u-verification-code").then(t.bind(null,/*! uview-ui/components/u-verification-code/u-verification-code.vue */548))}}}catch(e){if(-1===e.message.indexOf("Cannot find module")||-1===e.message.indexOf(".vue"))throw e;console.error(e.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var n=this,e=n.$createElement;n._self._c;n._isMounted||(n.e0=function(e){n.selectShow=!n.selectShow})},i=!1,s=[];r._withStripped=!0},78:
/*!************************************************************!*\
  !*** ./src/pages/login/login.vue?vue&type=script&lang=js& ***!
  \************************************************************/
/*! no static exports found */function(e,n,t){"use strict";t.r(n);var o,r=t(/*! -!../../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js& */79),i=t.n(r);for(o in r)["default"].indexOf(o)<0&&function(e){t.d(n,e,function(){return r[e]})}(o);n.default=i.a},79:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pages/login/login.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,o,a){"use strict";!function(r){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=e(a(/*! ./node_modules/@vue/babel-preset-app/node_modules/@babel/runtime/regenerator */47)),s=e(a(/*! @/services/api.login.js */53));function e(e){return e&&e.__esModule?e:{default:e}}function u(e,n,t,o,r,i,s){try{var a=e[i](s),u=a.value}catch(e){return void t(e)}a.done?n(u):Promise.resolve(u).then(o,r)}function n(a){return function(){var e=this,s=arguments;return new Promise(function(n,t){var o=a.apply(e,s);function r(e){u(o,n,t,r,i,"next",e)}function i(e){u(o,n,t,r,i,"throw",e)}r(void 0)})}}var t={name:"login",mixins:[],props:{},components:{},computed:{},data:function(){return{url:void 0,loading:!1,loginType:1,tips:"获取验证码",seconds:60,passwordImg:"",codeImg:"",forgetImg:"",roleVisible:!1,form:{phone:"",password:"",code:""},list:[{name:"账号密码登录"},{name:"短信快捷登录"}],current:0,roles:[],checkRole:void 0,logoImage:a(/*! @/static/imgs/login/logo.png */80),typeList:[{value:86,name:"中国大陆+86",checked:!0},{value:852,name:"中国香港+852",checked:!1},{value:853,name:"中国澳门+853",checked:!1},{value:886,name:"中国台湾+886",checked:!1}],selectShow:!1,myValue:86}},onLoad:function(e){},created:function(){},onShow:function(){if(r.getStorageSync("token"))return r.switchTab({url:"/pages/index/index"})},methods:{change:function(e){this.current=e},toForget:function(){r.navigateTo({url:"/pages/mine/views/reset-password?fromLogin=1"})},toRegister:function(){r.navigateTo({url:"/pages/login/views/register"})},cellClick:function(e,n){console.log(e),console.log(n);for(var t=0;t<this.typeList.length;t++)this.typeList[t].checked=!1;this.typeList[e].checked=!this.typeList[e].checked,this.myValue=n.value,this.selectShow=!1},loginClick:function(){var t=this;return n(i.default.mark(function e(){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.verify())return t.$toast(n),e.abrupt("return");e.next=4;break;case 4:t.go();case 5:case"end":return e.stop()}},e)}))()},weChatLogin:function(t){var e=wx,o=this;o.$loading.close(),e.login({success:function(e){e.code&&(console.log(e.code),s.default.wxLogin({code:e.code}).then(function(e){var n;1===e.code&&(o.$store.commit("updateToken",e.retObj),e.retObj.userNick||e.retObj.headImg?e.retObj.phone?(o.$loading.close(),o.$store.dispatch("loadUser"),r.switchTab({url:"/pages/index/index"})):(o.$loading.close(),console.log(111),r.reLaunch({url:"/pages/mine/views/update-phone"})):(n={headImg:t.avatarUrl,userNick:t.nickName},s.default.updateUserInfo(n).then(function(e){o.$store.dispatch("loadUser"),r.switchTab({url:"/pages/index/index"}),o.$loading.close(),console.log(e)}))),console.log(e)}))}})},go:function(){var o=this;return n(i.default.mark(function e(){var n,t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={phone:o.form.phone},0===o.current?n.pwd=o.form.password:n.code=o.form.code,o.loading=!0,e.prev=3,e.next=6,s.default.auth(n);case 6:t=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0);case 12:return 1===t.code&&"未设置密码"!==t.msg?(o.$store.commit("updateToken",t.retObj),o.$store.dispatch("loadUser"),r.switchTab({url:"/pages/index/index"})):1===t.code&&"未设置密码"===t.msg&&r.navigateTo({url:"/pages/mine/views/set-password"}),o.loading=!1,o.$toast(t.msg),e.abrupt("return");case 16:case"end":return e.stop()}},e,null,[[3,9]])}))()},getCode:function(){var t=this;return n(i.default.mark(function e(){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t.form.phone)return e.abrupt("return",t.$toast("请输入正确的手机号"));e.next=2;break;case 2:t.$refs.uCode.canGetCode?(r.showLoading({title:"正在获取验证码"}),n={phone:t.form.phone,type:t.myValue},s.default.sendCode(n,!0).then(function(e){1===e.code?(r.hideLoading(),t.$refs.uCode.start()):(r.hideLoading(),t.$toast("获取验证码失败"),t.$refs.uCode.reset()),console.log(e)})):t.$u.toast("倒计时结束后再发送");case 3:case"end":return e.stop()}},e)}))()},savePassword:function(){var o=this;return n(i.default.mark(function e(){var n,t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.verify())return o.$toast(n),e.abrupt("return");e.next=4;break;case 4:return n={userName:o.form.phone,password:o.base64(o.form.newPassword),captcha:o.form.forgetCode},o.loading=!0,e.prev=6,e.next=9,s.default.updatePassword(n);case 9:t=e.sent,e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(6),o.loading=!1,e.t0.message&&o.$toast(e.t0.message),e.abrupt("return");case 17:if(o.checkRes(t,!0))return o.loading=!1,e.abrupt("return");e.next=20;break;case 20:o.$toast("密码修改成功，请使用新密码登录"),o.changeType(1),o.$store.commit("signout"),o.form.forgetCode="",o.form.newPassword="",o.form.newPassword2="",o.form.password="",o.loading=!1;case 28:case"end":return e.stop()}},e,null,[[6,12]])}))()},dataFormat:function(){},verify:function(){if(!this.$u.test.mobile(this.form.phone))return"请输入正确的手机号";if(1==this.loginType){if(!this.form.password)return"请输入密码"}else if(2==this.loginType){if(!this.form.code)return"请输入验证码"}else if(3==this.loginType)return this.form.forgetCode?this.form.newPassword?this.form.newPassword.length<6?"密码至少6位":this.form.newPassword!=this.form.newPassword2?"新密码两次输入不一致":void 0:"请输入密码":"请输入验证码"},changeType:function(e){var n="";switch(this.loginType=e){case 1:n="登录";break;case 2:n="验证码登录";break;case 3:n="忘记密码"}r.setNavigationBarTitle({title:n})},call:function(){r.makePhoneCall({phoneNumber:"400-006-2020"})},getUserProfile:function(){var e=wx;console.log(e);var n=this;e.getUserProfile({desc:"获取你的昵称、头像、地区及性别",success:function(e){console.log(e),n.weChatLogin(e.userInfo)},fail:function(e){n.$toast("微信授权失败")}})},base64:function(e){for(var n,t,o,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=e.length,s=0,a="";s<i;){if(n=255&e.charCodeAt(s++),s===i){a+=r.charAt(n>>2),a+=r.charAt((3&n)<<4),a+="==";break}if(t=e.charCodeAt(s++),s===i){a+=r.charAt(n>>2),a+=r.charAt((3&n)<<4|(240&t)>>4),a+=r.charAt((15&t)<<2),a+="=";break}o=e.charCodeAt(s++),a+=r.charAt(n>>2),a+=r.charAt((3&n)<<4|(240&t)>>4),a+=r.charAt((15&t)<<2|(192&o)>>6),a+=r.charAt(63&o)}return a},codeChange:function(e){this.tips=e}}};o.default=t}.call(this,a(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).default)},81:
/*!*********************************************************************!*\
  !*** ./src/pages/login/login.vue?vue&type=style&index=0&lang=less& ***!
  \*********************************************************************/
/*! no static exports found */function(e,n,t){"use strict";t.r(n);var o,r=t(/*! -!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-2!../../../node_modules/postcss-loader/src??ref--10-oneOf-1-3!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-5!../../../node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!../../../node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=less& */82),i=t.n(r);for(o in r)["default"].indexOf(o)<0&&function(e){t.d(n,e,function(){return r[e]})}(o);n.default=i.a},82:
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-2!./node_modules/postcss-loader/src??ref--10-oneOf-1-3!./node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--10-oneOf-1-5!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./src/pages/login/login.vue?vue&type=style&index=0&lang=less& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,n,t){}},[[74,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/login/login.js.map